angular.module("ng-echarts",[]).directive("ngEcharts",function(){return{controller:["$scope","$element",function(t,n){t.chart=echarts.init(n[0]),this.getChart=function(){return t.chart},this.showLoading=function(n){var e=n||{text:"数据加载中",effect:"bubble",textStyle:{fontSize:20}};t.chart.showLoading(e)},this.hideLoading=function(){t.chart.hideLoading()}}],link:function(t,n,e,i){function o(){console.log(">>> refresh.."),angular.isDefined(t.setting.dataLoaded)?t.setting.dataLoaded===!1?angular.isDefined(t.setting.loadingOption)?i.showLoading(t.setting.loadingOption):i.showLoading():(r.setOption(t.setting.option),r.resize(),i.hideLoading()):(r.setOption(t.setting.option),r.resize())}window.onresize = chart.resize;function a(){angular.forEach(t.setting.event,function(t,n){for(var e in t)r.on(e,t[e])})}var r=t.chart;t.setting&&(angular.isDefined(t.setting.event)&&angular.isArray(t.setting.event)&&a(),t.$watch("setting",function(t){t&&o()},!0))},scope:{setting:"=setting"},restrict:"EA"}});